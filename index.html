<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omni Checklist Hub</title>
    
    <!-- PWA, SEO & Mobile Meta -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Omni Checklist">
    <meta name="application-name" content="Omni Checklist">
    <meta name="description" content="Omni Technologies Device Checklist Hub for fire-alarm inspections.">
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="https://placehold.co/180x180/0ea5e9/ffffff?text=Omni">
    <link rel="manifest" href="data:application/manifest+json,{
        &quot;name&quot;: &quot;Omni Checklist Hub&quot;,
        &quot;short_name&quot;: &quot;OmniCheck&quot;,
        &quot;start_url&quot;: &quot;.&quot;,
        &quot;display&quot;: &quot;standalone&quot;,
        &quot;background_color&quot;: &quot;#0f172a&quot;,
        &quot;theme_color&quot;: &quot;#0ea5e9&quot;,
        &quot;description&quot;: &quot;A checklist application for Omni inspectors.&quot;,
        &quot;icons&quot;: [{
            &quot;src&quot;: &quot;https://placehold.co/192x192/0ea5e9/ffffff?text=Omni&quot;,
            &quot;sizes&quot;: &quot;192x192&quot;,
            &quot;type&quot;: &quot;image/png&quot;
        }, {
            &quot;src&quot;: &quot;https://placehold.co/512x512/0ea5e9/ffffff?text=Omni&quot;,
            &quot;sizes&quot;: &quot;512x512&quot;,
            &quot;type&quot;: &quot;image/png&quot;
        }]
    }">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'media', // or 'class'
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              slate: {
                850: '#17202e',
                950: '#0f172a',
              }
            }
          }
        }
      }
    </script>
    
    <!-- Custom Styles -->
    <style type="text/css">
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap');
      
      /* Base styles */
      body { 
        font-family: 'Inter', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        padding-bottom: 56px; /* Prevent footer from overlapping content */
      }
      
      /* Custom focus rings for better accessibility */
      .focus-ring { 
        @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-950 focus:ring-sky-500; 
      }
      
      /* Arrow rotation for accordion (used for completed devices) */
      [aria-expanded="true"] .accordion-arrow { transform: rotate(180deg); }
      
      /* Styling for sortable table headers */
      .table-header-sortable:hover { @apply bg-slate-200 dark:bg-slate-700/50; }
      .table-header-sortable .sort-icon { opacity: 0.3; transition: opacity 0.2s; }
      .table-header-sortable[aria-sort] .sort-icon { opacity: 1; }
      
      /* Visual feedback on check/uncheck */
      @keyframes flash-sky {
        0% { background-color: transparent; }
        50% { background-color: rgba(14, 165, 233, 0.1); }
        100% { background-color: transparent; }
      }
      .flash-bg {
        animation: flash-sky 0.5s ease-out;
      }
      
      /* Sticky footer styles with blur effect */
      .sticky-footer {
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        background-color: rgba(248, 250, 252, 0.85); /* light mode bg */
      }
      .dark .sticky-footer {
          background-color: rgba(15, 23, 42, 0.85); /* dark mode bg */
      }
    </style>
</head>
<body class="bg-slate-100 dark:bg-slate-950 text-slate-800 dark:text-slate-200">

    <!-- Hidden file input for the import functionality -->
    <input type="file" id="import-file-input" class="hidden" accept=".json">

    <div id="app-container" class="relative min-h-screen">
        
        <!-- Header -->
        <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md sticky top-0 z-40 w-full border-b border-slate-200 dark:border-slate-800">
            <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <!-- Left Side: Title -->
                    <div class="flex items-center">
                        <span class="text-2xl font-bold text-sky-600 dark:text-sky-500">âœ…</span>
                        <h1 class="ml-3 text-xl font-bold tracking-tight">Omni Checklist</h1>
                    </div>
                    
                    <!-- Right Side: Hamburger Menu -->
                    <div id="header-menu-container" class="relative">
                        <button id="menu-toggle-button" type="button" class="p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 focus-ring" aria-label="Open options menu" aria-haspopup="true" aria-expanded="false">
                            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                            </svg>
                        </button>
                        
                        <div id="menu-dropdown" class="hidden absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white dark:bg-slate-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="menu-toggle-button" tabindex="-1">
                            <div class="py-1" role="none">
                                <a href="#" class="text-slate-700 dark:text-slate-200 block px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700" role="menuitem" tabindex="-1" id="menu-undo" data-menu-action="undo">Undo Last Check</a>
                                <div class="border-t border-slate-200 dark:border-slate-700 my-1"></div>
                                <a href="#" class="text-slate-700 dark:text-slate-200 block px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700" role="menuitem" tabindex="-1" id="menu-import" data-menu-action="import">Import List...</a>
                                <a href="#" class="text-slate-700 dark:text-slate-200 block px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700" role="menuitem" tabindex="-1" id="menu-export" data-menu-action="export">Export Inspected List</a>
                                <div class="border-t border-slate-200 dark:border-slate-700 my-1"></div>
                                <a href="#" class="text-slate-700 dark:text-slate-200 block px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700" role="menuitem" tabindex="-1" id="menu-share" data-menu-action="share-link">Share Progress Link</a>
                                <a href="#" class="text-red-600 dark:text-red-400 block px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700" role="menuitem" tabindex="-1" id="menu-clear" data-menu-action="clear-all">Clear All Checkmarks...</a>
                            </div>
                        </div>
                    </div>
                </div>
                 <!-- Mobile Building Picker (becomes visible via JS) -->
                <div id="mobile-building-picker-container" class="sm:hidden pb-4"></div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-screen-2xl mx-auto p-2 sm:p-6 lg:p-8">
            <div class="flex flex-col sm:flex-row gap-8">
                <!-- Checklist Workspace -->
                <div id="checklist-workspace" class="flex-grow">
                     <div id="welcome-message" class="text-center py-20 px-4">
                        <h2 class="text-2xl font-semibold text-slate-600 dark:text-slate-400">Welcome, Inspector!</h2>
                        <p class="mt-2 text-slate-500">Please select a checklist from the list to begin your inspection.</p>
                    </div>
                </div>

                <!-- Desktop Building Picker Sidebar -->
                <aside id="desktop-building-picker-container" class="hidden sm:block sm:w-64 md:w-72 lg:w-80 flex-shrink-0">
                </aside>
            </div>
        </main>
        
        <!-- Last Checked Footer -->
       <footer id="last-checked-footer" class="fixed bottom-0 left-0 right-0 p-3 border-t sticky-footer z-30 hidden bg-slate-900 dark:bg-slate-950 border-slate-800 dark:border-slate-700">
          <div class="max-w-screen-2xl mx-auto flex flex-col sm:flex-row sm:items-center sm:justify-between px-4 sm:px-6 lg:px-8 gap-1 sm:gap-4">
            <div id="footer-device-counter-container" class="text-sm font-semibold whitespace-nowrap w-full sm:w-auto text-left text-slate-100 dark:text-slate-200">
              <span class="opacity-90">Devices on screen:</span>
              <span id="footer-device-count" class="font-extrabold text-white dark:text-white">0</span>
            </div>
        
            <p id="last-checked-container" class="text-sm font-semibold text-left sm:text-right w-full sm:w-auto flex-grow invisible text-slate-100 dark:text-slate-200">
              <span class="opacity-90">Last Checked:</span>
              <span id="last-checked-text" class="font-bold text-sky-400 dark:text-sky-300"></span>
            </p>
          </div>
        </footer>

        <!-- Toasts/Notifications Container -->
        <div id="toast-container" aria-live="assertive" aria-atomic="true" class="fixed bottom-16 right-0 p-4 sm:p-6 space-y-3 z-50 w-full max-w-sm"></div>
        
        <!-- Confirmation Modal -->
        <div id="confirmation-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4" aria-labelledby="modal-title" role="dialog" aria-modal="true">
            <div id="confirmation-modal-panel" class="relative transform overflow-hidden rounded-lg bg-white dark:bg-slate-800 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95">
                <div class="bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/50 sm:mx-0 sm:h-10 sm:w-10">
                            <svg class="h-6 w-6 text-red-600 dark:text-red-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                            <h3 class="text-lg font-semibold leading-6 text-slate-900 dark:text-slate-100" id="modal-title">Confirmation</h3>
                            <div class="mt-2">
                                <p class="text-sm text-slate-500 dark:text-slate-400" id="modal-message">Are you sure? This action cannot be undone.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-50 dark:bg-slate-800/50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                    <button type="button" id="modal-confirm-button" class="inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus-ring sm:ml-3 sm:w-auto sm:text-sm">Confirm</button>
                    <button type="button" id="modal-cancel-button" class="mt-3 inline-flex w-full justify-center rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-4 py-2 text-base font-medium text-slate-700 dark:text-slate-200 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-600 focus-ring sm:mt-0 sm:w-auto sm:text-sm">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Application Logic -->
    <script type="module" src="./app.js"></script>

</body>
</html>
